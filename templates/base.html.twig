<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.2/jquery.min.js" integrity="sha512-tWHlutFnuG0C6nQRlpvrEhE4QpkG1nn2MOUMWmUeRePl4e3Aki0VB6W1v3oLjFtd0hVOtRQ9PHpSfN6u6/QXkQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        {% block stylesheets %}
        {% endblock %}

        {% block javascripts %}
        {% endblock %}
    </head>
    <body>
        <nav class="navbar navbar-expand-lg justify-content-center navbar-dark bg-dark">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/list-posts">List Posts</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/create-post">Create Post</a>
                </li>
            </ul>
        </nav>
        <div class="container">
            {% block body %}{% endblock %}
        </div>

        <div class="modal fade" id="bootstrapAlertModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="bootstrapAlertBody"></div>
                    <div class="modal-footer"></div>
                </div>
            </div>
        </div>

        <script>
            function showCustomModal({ title = 'Notice', message = '', buttons = [], type = '' }) {
                const alertModal = document.getElementById('bootstrapAlertModal');
                const $header = $('.modal-header');

                // Set title and message
                $('.modal-title').text(title);
                $('#bootstrapAlertBody').text(message);

                // Clean up previous type classes
                $header.className = 'modal-header'; // Reset

                // Optionally apply type class to header
                if (type) {
                    $header.addClass('bg-' + type + ' text-white');
                }

                const $footer = $('.modal-footer');
                $footer.empty(); // Clear previous buttons

                // Add custom buttons
                buttons.forEach(btn => {
                    const button = document.createElement('button');
                    button.className = 'btn ' + (btn.class || 'btn-secondary');
                    button.textContent = btn.label || 'OK';

                    // Attach click handler
                    button.addEventListener('click', () => {
                        if (btn.onClick) btn.onClick(); // Call user's function
                        bootstrap.Modal.getInstance(alertModal).hide();
                    });

                    $footer.append(button);
                });

                // Show modal
                const modal = new bootstrap.Modal(alertModal);
                modal.show();
            }
        </script>
    </body>
</html>
